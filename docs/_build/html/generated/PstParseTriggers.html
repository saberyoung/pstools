
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>pst.pipeline.PstParseTriggers &#8212; pstools 0.5.1.1 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="pst-pipeline-pstparsetriggers">
<h1>pst.pipeline.PstParseTriggers<a class="headerlink" href="#pst-pipeline-pstparsetriggers" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers">
<em class="property">class </em><code class="sig-prename descclassname">pst.pipeline.PstParseTriggers.</code><code class="sig-name descname">PstParseTriggers</code><span class="sig-paren">(</span><em class="sig-param">hpmap=None</em>, <em class="sig-param">fithdr=None</em>, <em class="sig-param">xmlinf=None</em>, <em class="sig-param">defconf=None</em>, <em class="sig-param">logger=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers" title="Permalink to this definition">¶</a></dt>
<dd><p>PstParseTriggers: Read and process trigger healpix map from a given source</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>hpmap</strong><span class="classifier">array-like shape (Npix,) or (4, Npix)</span></dt><dd><p>healpix fits map, including trigger localization probability (1d)
and/or distance informations (3d).</p>
</dd>
<dt><strong>fithdr</strong><span class="classifier"><cite>dict</cite></span></dt><dd><p>healpix fits header, from fits file</p>
</dd>
<dt><strong>xmlinf</strong><span class="classifier"><cite>dict</cite></span></dt><dd><p>voevent informations, from xml file</p>
</dd>
<dt><strong>defconf</strong><span class="classifier"><cite>dict</cite></span></dt><dd><p>default configure, if any PstParseTriggers parameter was included in defconf dictionary, 
then its default value would be applied</p>
</dd>
<dt><strong>logger</strong><span class="classifier"><cite>class</cite></span></dt><dd><p>logging object</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">PstGetTilings</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">PstGetGalaxies</span></code></dt><dd></dd>
</dl>
</div>
<p class="rubric">Examples</p>
<p>see also <a class="reference external" href="https://github.com/saberyoung/pstools/blob/master/notebook/test_triggers.ipynb">https://github.com/saberyoung/pstools/blob/master/notebook/test_triggers.ipynb</a></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pst.pipeline.PstParseTriggers</span> <span class="kn">import</span> <span class="n">PstParseTriggers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">PstParseTriggers</span><span class="p">()</span>
<span class="go">parse sources to obtain self.data</span>
<span class="go">Source options:           </span>
<span class="go">    skymap      `string`         filename of healpix fits</span>
<span class="go">    xmlfile     `string`         the filename of XML</span>
<span class="go">    root        `class`          root element of the XML document parsed by lxml.etree</span>
<span class="go">    coolist     `list`           [ra,dec,err], `float`, `float`, `float`</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s1">&#39;https://gracedb.ligo.org/api/superevents/S190510g/files/bayestar.fits.gz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">data_list</span><span class="p">()</span>
<span class="go">{&#39;hpmap&#39;: array([[1.25419392e-07, 1.62144031e-07, 1.79526856e-07, ...,</span>
<span class="go">    2.46590458e-10, 9.75865543e-10, 6.87730424e-10],</span>
<span class="go">   [1.44844886e+02, 1.54923595e+02, 1.40961397e+02, ...,</span>
<span class="go">    2.72896179e+02, 2.21541076e+02, 2.82526517e+02],</span>
<span class="go">   [1.41256230e+02, 1.39624119e+02, 1.41143310e+02, ...,</span>
<span class="go">    1.68491517e+02, 1.68595934e+02, 1.55918798e+02],</span>
<span class="go">   [2.53084235e-05, 2.36136978e-05, 2.61189424e-05, ...,</span>
<span class="go">    9.76686037e-06, 1.30767396e-05, 9.62544372e-06]]), &#39;xmlinf&#39;: None, &#39;fithdr&#39;: {&#39;XTENSION&#39;: &#39;BINTABLE&#39;, &#39;BITPIX&#39;: 8, &#39;NAXIS&#39;: 2, &#39;NAXIS1&#39;: 32, &#39;NAXIS2&#39;: 3145728, &#39;PCOUNT&#39;: 0, &#39;GCOUNT&#39;: 1, &#39;TFIELDS&#39;: 4, &#39;TTYPE1&#39;: &#39;PROB&#39;, &#39;TFORM1&#39;: &#39;D&#39;, &#39;TUNIT1&#39;: &#39;pix-1&#39;, &#39;TTYPE2&#39;: &#39;DISTMU&#39;, &#39;TFORM2&#39;: &#39;D&#39;, &#39;TUNIT2&#39;: &#39;Mpc&#39;, &#39;TTYPE3&#39;: &#39;DISTSIGMA&#39;, &#39;TFORM3&#39;: &#39;D&#39;, &#39;TUNIT3&#39;: &#39;Mpc&#39;, &#39;TTYPE4&#39;: &#39;DISTNORM&#39;, &#39;TFORM4&#39;: &#39;D&#39;, &#39;TUNIT4&#39;: &#39;Mpc-2&#39;, &#39;MOC&#39;: True, &#39;PIXTYPE&#39;: &#39;HEALPIX&#39;, &#39;ORDERING&#39;: &#39;NESTED&#39;, &#39;COORDSYS&#39;: &#39;C&#39;, &#39;NSIDE&#39;: 512, &#39;INDXSCHM&#39;: &#39;IMPLICIT&#39;, &#39;OBJECT&#39;: &#39;G331903&#39;, &#39;REFERENC&#39;: &#39;https://gracedb.ligo.org/events/G331903&#39;, &#39;INSTRUME&#39;: &#39;H1,L1,V1&#39;, &#39;DATE-OBS&#39;: &#39;2019-05-10T02:59:39.292500&#39;, &#39;MJD-OBS&#39;: 58613.12476032978, &#39;DATE&#39;: &#39;2019-05-10T03:00:47.000000&#39;, &#39;CREATOR&#39;: &#39;BAYESTAR&#39;, &#39;ORIGIN&#39;: &#39;LIGO/Virgo&#39;, &#39;RUNTIME&#39;: 18.0, &#39;DISTMEAN&#39;: 268.8566049372629, &#39;DISTSTD&#39;: 108.0709050006497, &#39;LOGBCI&#39;: 0.6949211109947058, &#39;LOGBSN&#39;: 7.032293281836687, &#39;VCSVERS&#39;: &#39;ligo.skymap 0.1.6&#39;, &#39;VCSREV&#39;: &#39;79504ec9fb1890fa91665bd69d7aa66cdaf11184&#39;, &#39;DATE-BLD&#39;: &#39;2019-03-26T18:11:21&#39;, &#39;HISTORY&#39;: &#39;gwcelery worker -l info -n gwcelery-openmp-worker -Q openmp -c 1&#39;}}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">make_report</span><span class="p">()</span>
<span class="go">&#39;DISTMEAN:268.8566049372629 DISTSTD:108.0709050006497 DATE-OBS:2019-05-10T02:59:39.292500 MJD-OBS:58613.12476032978 OBJECT:G331903 INSTRUME:H1,L1,V1 CREATOR:BAYESTAR &#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">calc_area</span><span class="p">()</span>   
<span class="go">{0.5: 575.5456172035578, 0.9: 3463.7648737864856} </span>
</pre></div>
</div>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.altaz" title="pst.pipeline.PstParseTriggers.PstParseTriggers.altaz"><code class="xref py py-obj docutils literal notranslate"><span class="pre">altaz</span></code></a>(self[, obstime, cls, nest, lat, lon, alt])</p></td>
<td><p>calculate altazimuth</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.calc_area" title="pst.pipeline.PstParseTriggers.PstParseTriggers.calc_area"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calc_area</span></code></a>(self[, cls])</p></td>
<td><p>calculate sky localization region area (unit in sq.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.calc_contours" title="pst.pipeline.PstParseTriggers.PstParseTriggers.calc_contours"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calc_contours</span></code></a>(self[, cls])</p></td>
<td><p>calculate indices located in specific confidence level region of trigger map</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.calc_vis" title="pst.pipeline.PstParseTriggers.PstParseTriggers.calc_vis"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calc_vis</span></code></a>(self[, limalt, limsun, obstime, …])</p></td>
<td><p>calculate available area, considering airmass and sun constrain</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.checkhp" title="pst.pipeline.PstParseTriggers.PstParseTriggers.checkhp"><code class="xref py py-obj docutils literal notranslate"><span class="pre">checkhp</span></code></a>(self)</p></td>
<td><p>check if PstParseTriggers is parsed from one source or not</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.coo" title="pst.pipeline.PstParseTriggers.PstParseTriggers.coo"><code class="xref py py-obj docutils literal notranslate"><span class="pre">coo</span></code></a>(self, coo[, wdir, savefits, nside, …])</p></td>
<td><p>use ra, dec, error box to build PstParseTriggers.data</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.data_list" title="pst.pipeline.PstParseTriggers.PstParseTriggers.data_list"><code class="xref py py-obj docutils literal notranslate"><span class="pre">data_list</span></code></a>(self)</p></td>
<td><p>get PstParseTriggers.data</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.download_skymap" title="pst.pipeline.PstParseTriggers.PstParseTriggers.download_skymap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">download_skymap</span></code></a>(wdir, tmpfile, url)</p></td>
<td><p>look up URL of sky map, download sky map, and parse FITS file</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.fits" title="pst.pipeline.PstParseTriggers.PstParseTriggers.fits"><code class="xref py py-obj docutils literal notranslate"><span class="pre">fits</span></code></a>(self, skymap[, nest])</p></td>
<td><p>parser skymap file, and build PstParseTriggers.data</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.get" title="pst.pipeline.PstParseTriggers.PstParseTriggers.get"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get</span></code></a>(self, _k)</p></td>
<td><p>get PstParseTriggers.data</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.make_hpmap" title="pst.pipeline.PstParseTriggers.PstParseTriggers.make_hpmap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">make_hpmap</span></code></a>(self, wdir, tempfile, nest, coord)</p></td>
<td><p>generate and store healpix map, from PstParseTriggers.data[‘hpmap’]</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.make_report" title="pst.pipeline.PstParseTriggers.PstParseTriggers.make_report"><code class="xref py py-obj docutils literal notranslate"><span class="pre">make_report</span></code></a>(self[, style])</p></td>
<td><p>make a summary report on input source.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.obstime" title="pst.pipeline.PstParseTriggers.PstParseTriggers.obstime"><code class="xref py py-obj docutils literal notranslate"><span class="pre">obstime</span></code></a>([t])</p></td>
<td><p>define observing time</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.parse_root_coo" title="pst.pipeline.PstParseTriggers.PstParseTriggers.parse_root_coo"><code class="xref py py-obj docutils literal notranslate"><span class="pre">parse_root_coo</span></code></a>(self, root, nside)</p></td>
<td><p>parse root object, try find ra,dec and localization of trigger</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.parse_root_skymap" title="pst.pipeline.PstParseTriggers.PstParseTriggers.parse_root_skymap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">parse_root_skymap</span></code></a>(self, root)</p></td>
<td><p>parse root object, try find healpix fits map url</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.parse_xml" title="pst.pipeline.PstParseTriggers.PstParseTriggers.parse_xml"><code class="xref py py-obj docutils literal notranslate"><span class="pre">parse_xml</span></code></a>(self, xmlfile)</p></td>
<td><p>parse xmlfile via lxml</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.read_skymap" title="pst.pipeline.PstParseTriggers.PstParseTriggers.read_skymap"><code class="xref py py-obj docutils literal notranslate"><span class="pre">read_skymap</span></code></a>(_fits, nest)</p></td>
<td><p>read healpix fits or fits url, obtain map and header</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.reset" title="pst.pipeline.PstParseTriggers.PstParseTriggers.reset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset</span></code></a>(self, _k)</p></td>
<td><p>reset part of PstParseTriggers.data</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.resetall" title="pst.pipeline.PstParseTriggers.PstParseTriggers.resetall"><code class="xref py py-obj docutils literal notranslate"><span class="pre">resetall</span></code></a>(self)</p></td>
<td><p>reset all of PstParseTriggers.data</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.root" title="pst.pipeline.PstParseTriggers.PstParseTriggers.root"><code class="xref py py-obj docutils literal notranslate"><span class="pre">root</span></code></a>(self, root[, wdir, savefits, nside, coord])</p></td>
<td><p>parser root element, and build PstParseTriggers.data</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.run_config" title="pst.pipeline.PstParseTriggers.PstParseTriggers.run_config"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_config</span></code></a>(self, defconf)</p></td>
<td><p>read default value for parameters</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.set" title="pst.pipeline.PstParseTriggers.PstParseTriggers.set"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set</span></code></a>(self, _k, _v)</p></td>
<td><p>set PstParseTriggers.data</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.url" title="pst.pipeline.PstParseTriggers.PstParseTriggers.url"><code class="xref py py-obj docutils literal notranslate"><span class="pre">url</span></code></a>(self, url[, wdir, savefits, nest])</p></td>
<td><p>parser skymap url, and build PstParseTriggers.data</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.xml" title="pst.pipeline.PstParseTriggers.PstParseTriggers.xml"><code class="xref py py-obj docutils literal notranslate"><span class="pre">xml</span></code></a>(self, xml[, wdir, savefits, nside, coord])</p></td>
<td><p>parser voenevt XML file, and build PstParseTriggers.data</p></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.altaz">
<code class="sig-name descname">altaz</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">obstime=None</em>, <em class="sig-param">cls=None</em>, <em class="sig-param">nest=None</em>, <em class="sig-param">lat=None</em>, <em class="sig-param">lon=None</em>, <em class="sig-param">alt=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.altaz" title="Permalink to this definition">¶</a></dt>
<dd><p>calculate altazimuth</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>lon</strong><span class="classifier"><cite>float</cite> or None</span></dt><dd><p>longtitude of telescope, defaul: la palma chile</p>
</dd>
<dt><strong>lat</strong><span class="classifier"><cite>float</cite> or None</span></dt><dd><p>latitude of telescope, defaul: la palma chile</p>
</dd>
<dt><strong>alt</strong><span class="classifier"><cite>float</cite> or None</span></dt><dd><p>altitude of telescope, defaul: la palma chile</p>
</dd>
<dt><strong>obstime</strong><span class="classifier"><cite>float</cite> or None or astropy.time obj</span></dt><dd><p>observing time.
None for now; <cite>float</cite> number (unit in seconds) represents how much time before (negative) or after (positive) now; <cite>astropy.time</cite> set specific observing time</p>
</dd>
<dt><strong>cls</strong><span class="classifier"><cite>list</cite></span></dt><dd><p>list of confidence level, default: [.5, .9]</p>
</dd>
<dt><strong>nest</strong><span class="classifier"><cite>bool</cite></span></dt><dd><p>healpix ordering options: 
if True, healpix map use <cite>nest</cite> ordering, otherwise, use <cite>ring</cite> instead</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>altaz</strong><span class="classifier"><cite>list</cite></span></dt><dd><p>altaz list</p>
</dd>
<dt><strong>obstime</strong><span class="classifier"><cite>astropy.time</cite></span></dt><dd><p>observing time,</p>
</dd>
<dt><strong>observaroty</strong><span class="classifier"><cite>astropy.coordinate</cite></span></dt><dd><p>observaroty location</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.calc_area">
<code class="sig-name descname">calc_area</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">cls=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.calc_area" title="Permalink to this definition">¶</a></dt>
<dd><p>calculate sky localization region area (unit in sq. deg) for different confidence level region of trigger map</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>cls</strong><span class="classifier"><cite>list</cite></span></dt><dd><p>list of confidence level, default: [.5, .9]</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>arealist</strong><span class="classifier"><cite>dictionary</cite></span></dt><dd><p>dictionary of area corresponding input C.L.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pst.pipeline.PstParseTriggers</span> <span class="kn">import</span> <span class="n">PstParseTriggers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">PstParseTriggers</span><span class="p">()</span>       
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s1">&#39;https://gracedb.ligo.org/api/superevents/S190510g/files/bayestar.fits.gz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">calc_area</span><span class="p">()</span>
<span class="go">{0.5: 575.5456172035578, 0.9: 3463.7648737864856}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">calc_area</span><span class="p">([</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="o">.</span><span class="mi">99</span><span class="p">])</span>
<span class="go">{0.1: 36.351906008208665, 0.5: 575.5456172035578, 0.99: 11508.39446313552}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.calc_contours">
<code class="sig-name descname">calc_contours</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">cls=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.calc_contours" title="Permalink to this definition">¶</a></dt>
<dd><p>calculate indices located in specific confidence level region of trigger map</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>cls</strong><span class="classifier"><cite>list</cite></span></dt><dd><p>list of confidence level, default: [.5, .9]</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>indexlist</strong><span class="classifier"><cite>dictionary</cite></span></dt><dd><p>dictionary of healpix indices corresponding input C.L.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pst.pipeline.PstParseTriggers</span> <span class="kn">import</span> <span class="n">PstParseTriggers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">PstParseTriggers</span><span class="p">()</span>       
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s1">&#39;https://gracedb.ligo.org/api/superevents/S190510g/files/bayestar.fits.gz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">calc_contours</span><span class="p">()</span>
<span class="go">{0.5: array([2414072, 2418168, 2416119, ..., 2018356, 2022450, 2024499]), 0.9: array([2414072, 2418168, 2416119, ...,  783552,  734398,  771264])}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">calc_contours</span><span class="p">(</span><span class="bp">cls</span><span class="o">=</span><span class="p">[</span><span class="o">.</span><span class="mi">1</span><span class="p">,</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="o">.</span><span class="mi">99</span><span class="p">])</span>
<span class="go">{0.1: array([2414072, 2418168, 2416119, ..., 1570953, 1573001, 1573000]), 0.5: array([2414072, 2418168, 2416119, ..., 2018356, 2022450, 2024499]), 0.99: array([2414072, 2418168, 2416119, ..., 1309038, 1309052, 1309051])}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.calc_vis">
<code class="sig-name descname">calc_vis</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">limalt=2.5</em>, <em class="sig-param">limsun=-18</em>, <em class="sig-param">obstime=None</em>, <em class="sig-param">cls=None</em>, <em class="sig-param">nest=None</em>, <em class="sig-param">lat=None</em>, <em class="sig-param">lon=None</em>, <em class="sig-param">alt=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.calc_vis" title="Permalink to this definition">¶</a></dt>
<dd><p>calculate available area, considering airmass and sun constrain</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>limalt</strong><span class="classifier"><cite>float</cite></span></dt><dd><p>limitation on airmass, e.g. 2.5, will remain only fields with airmass less than 2.5</p>
</dd>
<dt><strong>limsun</strong><span class="classifier"><cite>float</cite></span></dt><dd><p>limitation on sun height, e.g. -18, will remain only fields with sun lower than -18</p>
</dd>
<dt><strong>lon</strong><span class="classifier"><cite>float</cite> or None</span></dt><dd><p>longtitude of telescope, defaul: la palma chile</p>
</dd>
<dt><strong>lat</strong><span class="classifier"><cite>float</cite> or None</span></dt><dd><p>latitude of telescope, defaul: la palma chile</p>
</dd>
<dt><strong>alt</strong><span class="classifier"><cite>float</cite> or None</span></dt><dd><p>altitude of telescope, defaul: la palma chile</p>
</dd>
<dt><strong>obstime</strong><span class="classifier"><cite>float</cite> or None or astropy.time obj</span></dt><dd><p>observing time.
None for now; <cite>float</cite> number (unit in seconds) represents how much time before (negative) or after (positive) now; <cite>astropy.time</cite> set specific observing time</p>
</dd>
<dt><strong>cls</strong><span class="classifier"><cite>list</cite></span></dt><dd><p>list of confidence level, default: [.5, .9]</p>
</dd>
<dt><strong>nest</strong><span class="classifier"><cite>bool</cite></span></dt><dd><p>healpix ordering options: 
if True, healpix map use <cite>nest</cite> ordering, otherwise, use <cite>ring</cite> instead</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>arealist</strong><span class="classifier"><cite>dictionary</cite></span></dt><dd><p>dictionary of area corresponding input C.L.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pst.pipeline.PstParseTriggers</span> <span class="kn">import</span> <span class="n">PstParseTriggers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">PstParseTriggers</span><span class="p">()</span>       
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s1">&#39;https://gracedb.ligo.org/api/superevents/S190510g/files/bayestar.fits.gz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">calc_vis</span><span class="p">(</span><span class="n">obstime</span><span class="o">=</span><span class="s1">&#39;2020-01-06 00:34:52&#39;</span><span class="p">)</span>
<span class="go">{0.5: 198.07330026983539, 0.9: 1359.6557052420903}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">calc_vis</span><span class="p">(</span><span class="n">obstime</span><span class="o">=</span><span class="s1">&#39;2020-01-06 10:34:52&#39;</span><span class="p">)</span>
<span class="go">{0.5: 0.0, 0.9: 0.0}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">calc_vis</span><span class="p">(</span><span class="n">obstime</span><span class="o">=</span><span class="s1">&#39;2020-01-06 10:34:52&#39;</span><span class="p">,</span><span class="n">limsun</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="go">{0.5: 326.4852279871439, 0.9: 1809.0843382894639}</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.checkhp">
<code class="sig-name descname">checkhp</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.checkhp" title="Permalink to this definition">¶</a></dt>
<dd><p>check if PstParseTriggers is parsed from one source or not</p>
<dl class="field-list">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl>
<dt><strong>res</strong><span class="classifier"><cite>bool</cite></span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.coo">
<code class="sig-name descname">coo</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">coo</em>, <em class="sig-param">wdir=None</em>, <em class="sig-param">savefits=None</em>, <em class="sig-param">nside=None</em>, <em class="sig-param">coord=None</em>, <em class="sig-param">nest=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.coo" title="Permalink to this definition">¶</a></dt>
<dd><p>use ra, dec, error box to build PstParseTriggers.data</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>coo</strong><span class="classifier"><cite>list</cite></span></dt><dd><p>[ra, dec, err]: ra, dec is the center of trigger 
while err is the estimated error box region</p>
</dd>
<dt><strong>savefits</strong><span class="classifier"><cite>string</cite> or None</span></dt><dd><p>save healpix fits or not,
if None, not save; 
if a string, savefits would be used to construct the downloaded file.</p>
</dd>
<dt><strong>wdir</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>working directory for downloaded healpix file if savefits is not None.</p>
</dd>
<dt><strong>nside</strong><span class="classifier"><cite>int</cite></span></dt><dd><p>healpix nside parameter, must be a power of 2, less than 2**30</p>
</dd>
<dt><strong>coord</strong><span class="classifier">sequence of character, optional</span></dt><dd><p>Either one of ‘G’, ‘E’ or ‘C’ to describe the coordinate system of the map, 
or a sequence of 2 of these to rotate the map from the first to the 
second coordinate system.</p>
</dd>
<dt><strong>nest</strong><span class="classifier"><cite>bool</cite></span></dt><dd><p>healpix ordering options: 
if True, healpix map use <cite>nest</cite> ordering, otherwise, use <cite>ring</cite> instead</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pst.pipeline.PstParseTriggers</span> <span class="kn">import</span> <span class="n">PstParseTriggers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">PstParseTriggers</span><span class="p">()</span>       
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">coo</span><span class="p">([</span><span class="mi">30</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.data_list">
<code class="sig-name descname">data_list</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.data_list" title="Permalink to this definition">¶</a></dt>
<dd><p>get PstParseTriggers.data</p>
<dl class="field-list">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl>
<dt><strong>data</strong><span class="classifier"><cite>dictionary</cite></span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.download_skymap">
<em class="property">static </em><code class="sig-name descname">download_skymap</code><span class="sig-paren">(</span><em class="sig-param">wdir</em>, <em class="sig-param">tmpfile</em>, <em class="sig-param">url</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.download_skymap" title="Permalink to this definition">¶</a></dt>
<dd><p>look up URL of sky map, download sky map, and parse FITS file</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>tmpfile</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>file name of healpix fits</p>
</dd>
<dt><strong>wdir</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>working directory for downloaded healpix file if savefits is not None.</p>
</dd>
<dt><strong>url</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>url of healpix fits</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.fits">
<code class="sig-name descname">fits</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">skymap</em>, <em class="sig-param">nest=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.fits" title="Permalink to this definition">¶</a></dt>
<dd><p>parser skymap file, and build PstParseTriggers.data</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>skymap</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>file name or url of healpix fits</p>
</dd>
<dt><strong>nest</strong><span class="classifier"><cite>bool</cite></span></dt><dd><p>healpix ordering options: 
if True, healpix map use <cite>nest</cite> ordering, otherwise, use <cite>ring</cite> instead</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pst.pipeline.PstParseTriggers</span> <span class="kn">import</span> <span class="n">PstParseTriggers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">PstParseTriggers</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s1">&#39;S190510g_bayestar.fits.gz&#39;</span><span class="p">,</span> <span class="n">nest</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">_k</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.get" title="Permalink to this definition">¶</a></dt>
<dd><p>get PstParseTriggers.data</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>_k</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>key</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>value</strong><span class="classifier"><cite>list</cite></span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.make_hpmap">
<code class="sig-name descname">make_hpmap</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">wdir</em>, <em class="sig-param">tempfile</em>, <em class="sig-param">nest</em>, <em class="sig-param">coord</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.make_hpmap" title="Permalink to this definition">¶</a></dt>
<dd><p>generate and store healpix map, from PstParseTriggers.data[‘hpmap’]</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>tempfile</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>healpix fits file name</p>
</dd>
<dt><strong>wdir</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>working directory for downloaded healpix file if savefits is not None.</p>
</dd>
<dt><strong>coord</strong><span class="classifier">sequence of character, optional</span></dt><dd><p>Either one of ‘G’, ‘E’ or ‘C’ to describe the coordinate system of the map, 
or a sequence of 2 of these to rotate the map from the first to the 
second coordinate system.</p>
</dd>
<dt><strong>nest</strong><span class="classifier"><cite>bool</cite></span></dt><dd><p>healpix ordering options: 
if True, healpix map use <cite>nest</cite> ordering, otherwise, use <cite>ring</cite> instead</p>
</dd>
<dt><strong>returns</strong></dt><dd></dd>
<dt><strong>———-</strong></dt><dd></dd>
<dt><strong>res</strong><span class="classifier"><cite>bool</cite></span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.make_report">
<code class="sig-name descname">make_report</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">style=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.make_report" title="Permalink to this definition">¶</a></dt>
<dd><p>make a summary report on input source. 
report is built from healpix fits header and XML file.
specify keys in keys_to_checkxml, keys_to_checkfits</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>style</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>Options: <cite>sms</cite>, <cite>email</cite>, <cite>slack</cite></p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>report</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>summary report</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pst.pipeline.PstParseTriggers</span> <span class="kn">import</span> <span class="n">PstParseTriggers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">PstParseTriggers</span><span class="p">()</span>       
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s1">&#39;https://gracedb.ligo.org/api/superevents/S190510g/files/bayestar.fits.gz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">make_report</span><span class="p">()</span>
<span class="go">&#39;DISTMEAN:268.8566049372629 DISTSTD:108.0709050006497 DATE-OBS:2019-05-10T02:59:39.292500 MJD-OBS:58613.12476032978 OBJECT:G331903 INSTRUME:H1,L1,V1 CREATOR:BAYESTAR &#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">keys_to_checkfits</span>
<span class="go">(&#39;DISTMEAN&#39;, &#39;DISTSTD&#39;, &#39;DATE-OBS&#39;, &#39;MJD-OBS&#39;, &#39;OBJECT&#39;, &#39;INSTRUME&#39;, &#39;CREATOR&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">keys_to_checkfits</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;DISTMEAN&#39;</span><span class="p">,</span> <span class="s1">&#39;DISTSTD&#39;</span><span class="p">,</span> <span class="s1">&#39;DATE-OBS&#39;</span><span class="p">,</span> <span class="s1">&#39;MJD-OBS&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">make_report</span><span class="p">()</span>
<span class="go">&#39;DISTMEAN:268.8566049372629 DISTSTD:108.0709050006497 DATE-OBS:2019-05-10T02:59:39.292500 MJD-OBS:58613.12476032978 &#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.obstime">
<em class="property">static </em><code class="sig-name descname">obstime</code><span class="sig-paren">(</span><em class="sig-param">t=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.obstime" title="Permalink to this definition">¶</a></dt>
<dd><p>define observing time</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>t</strong><span class="classifier"><cite>float</cite> or None or astropy.time</span></dt><dd><p>observing time.
None for now; <cite>float</cite> number (unit in seconds) represents how much time before (negative) or after (positive) now; <cite>astropy.time</cite> set specific observing time</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>obstime</strong><span class="classifier"><cite>astropy.time</cite></span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.parse_root_coo">
<code class="sig-name descname">parse_root_coo</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">root</em>, <em class="sig-param">nside</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.parse_root_coo" title="Permalink to this definition">¶</a></dt>
<dd><p>parse root object, try find ra,dec and localization of trigger</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>root</strong><span class="classifier"><cite>class</cite></span></dt><dd><p>root element of the XML document, parsed by lxml.etree</p>
</dd>
<dt><strong>nside</strong><span class="classifier"><cite>int</cite></span></dt><dd><p>healpix nside parameter, must be a power of 2, less than 2**30</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>res</strong><span class="classifier"><cite>bool</cite></span></dt><dd><p>if True, ra,dec,error box found</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.parse_root_skymap">
<code class="sig-name descname">parse_root_skymap</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">root</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.parse_root_skymap" title="Permalink to this definition">¶</a></dt>
<dd><p>parse root object, try find healpix fits map url</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>root</strong><span class="classifier"><cite>class</cite></span></dt><dd><p>root element of the XML document, parsed by lxml.etree</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>res</strong><span class="classifier"><cite>bool</cite></span></dt><dd><p>if True, url found (in case of GW preminary, initial, update);
otherwise, url missing (for GW retraction, GRB, AMON, etc)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.parse_xml">
<code class="sig-name descname">parse_xml</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">xmlfile</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.parse_xml" title="Permalink to this definition">¶</a></dt>
<dd><p>parse xmlfile via lxml</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>xmlfile</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>file name of XML</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>root</strong><span class="classifier"><cite>class</cite></span></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.read_skymap">
<em class="property">static </em><code class="sig-name descname">read_skymap</code><span class="sig-paren">(</span><em class="sig-param">_fits</em>, <em class="sig-param">nest</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.read_skymap" title="Permalink to this definition">¶</a></dt>
<dd><p>read healpix fits or fits url, obtain map and header</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>_fits</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>healpix fits or fits url</p>
</dd>
<dt><strong>nest</strong><span class="classifier"><cite>bool</cite></span></dt><dd><p>healpix ordering options: 
if True, healpix map use <cite>nest</cite> ordering, otherwise, use <cite>ring</cite> instead</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl>
<dt><strong>tmap</strong><span class="classifier">array-like shape (Npix,) or (4, Npix)</span></dt><dd><dl class="simple">
<dt>Either an array representing a map, or a sequence of 4 arrays </dt><dd><p>representing map, distance mean, variance, normalization</p>
</dd>
</dl>
</dd>
<dt><strong>header</strong><span class="classifier"><cite>dictionary</cite></span></dt><dd><p>header of healpix fits</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.reset">
<code class="sig-name descname">reset</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">_k</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>reset part of PstParseTriggers.data</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>_k</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>key</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.resetall">
<code class="sig-name descname">resetall</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.resetall" title="Permalink to this definition">¶</a></dt>
<dd><p>reset all of PstParseTriggers.data</p>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.root">
<code class="sig-name descname">root</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">root</em>, <em class="sig-param">wdir=None</em>, <em class="sig-param">savefits=None</em>, <em class="sig-param">nside=None</em>, <em class="sig-param">coord=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.root" title="Permalink to this definition">¶</a></dt>
<dd><p>parser root element, and build PstParseTriggers.data</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>root</strong><span class="classifier"><cite>class</cite></span></dt><dd><p>root element of the XML document, parsed by lxml.etree</p>
</dd>
<dt><strong>savefits</strong><span class="classifier"><cite>string</cite> or None</span></dt><dd><p>save healpix fits or not,
if None, not save; 
if a string, savefits would be used to construct the downloaded file.</p>
</dd>
<dt><strong>wdir</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>working directory for downloaded healpix file if savefits is not None.</p>
</dd>
<dt><strong>nside</strong><span class="classifier"><cite>int</cite></span></dt><dd><p>healpix nside parameter, must be a power of 2, less than 2**30</p>
</dd>
<dt><strong>coord</strong><span class="classifier">sequence of character, optional</span></dt><dd><p>Either one of ‘G’, ‘E’ or ‘C’ to describe the coordinate system of the map, 
or a sequence of 2 of these to rotate the map from the first to the 
second coordinate system.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>check usage of pygcn (<a class="reference external" href="https://github.com/lpsinger/pygcn">https://github.com/lpsinger/pygcn</a>)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">gcn</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pst.pipeline.PstParseTriggers</span> <span class="kn">import</span> <span class="n">PstParseTriggers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">PstParseTriggers</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">root</span><span class="p">):</span> 
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">a</span><span class="o">.</span><span class="n">root</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">calc_area</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">print</span> <span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gcn</span><span class="o">.</span><span class="n">listen</span><span class="p">(</span><span class="n">handler</span><span class="o">=</span><span class="n">handler</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.run_config">
<code class="sig-name descname">run_config</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">defconf</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.run_config" title="Permalink to this definition">¶</a></dt>
<dd><p>read default value for parameters</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>defconf</strong><span class="classifier"><cite>dict</cite></span></dt><dd><p>input parameter settings, if None, use default</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pst.pipeline.PstParseTriggers</span> <span class="kn">import</span> <span class="n">PstParseTriggers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">PstParseTriggers</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;cls&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">.</span><span class="mi">5</span><span class="p">,</span><span class="o">.</span><span class="mi">9</span><span class="p">,</span><span class="o">.</span><span class="mi">99</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">run_config</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.set">
<code class="sig-name descname">set</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">_k</em>, <em class="sig-param">_v</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.set" title="Permalink to this definition">¶</a></dt>
<dd><p>set PstParseTriggers.data</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>_k</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>key</p>
</dd>
<dt><strong>_v</strong><span class="classifier"><cite>string</cite> or <cite>float</cite> or <cite>int</cite> or etc</span></dt><dd><p>value</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.url">
<code class="sig-name descname">url</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">url</em>, <em class="sig-param">wdir=None</em>, <em class="sig-param">savefits=None</em>, <em class="sig-param">nest=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.url" title="Permalink to this definition">¶</a></dt>
<dd><p>parser skymap url, and build PstParseTriggers.data</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>url</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>url of healpix fits</p>
</dd>
<dt><strong>savefits</strong><span class="classifier"><cite>string</cite> or None</span></dt><dd><p>save healpix fits or not,
if None, not save; 
if a string, savefits would be used to construct the downloaded file.</p>
</dd>
<dt><strong>wdir</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>working directory for downloaded healpix file if savefits is not None.</p>
</dd>
<dt><strong>nest</strong><span class="classifier"><cite>bool</cite></span></dt><dd><p>healpix ordering options: 
if True, healpix map use <cite>nest</cite> ordering, otherwise, use <cite>ring</cite> instead</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pst.pipeline.PstParseTriggers</span> <span class="kn">import</span> <span class="n">PstParseTriggers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">PstParseTriggers</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">url</span><span class="p">(</span><span class="s1">&#39;https://gracedb.ligo.org/api/superevents/S190510g/files/bayestar.fits.gz&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="pst.pipeline.PstParseTriggers.PstParseTriggers.xml">
<code class="sig-name descname">xml</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">xml</em>, <em class="sig-param">wdir=None</em>, <em class="sig-param">savefits=None</em>, <em class="sig-param">nside=None</em>, <em class="sig-param">coord=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pst.pipeline.PstParseTriggers.PstParseTriggers.xml" title="Permalink to this definition">¶</a></dt>
<dd><p>parser voenevt XML file, and build PstParseTriggers.data</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>xml</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>file name or url of voenevt XML file</p>
</dd>
<dt><strong>savefits</strong><span class="classifier"><cite>string</cite> or None</span></dt><dd><p>save healpix fits or not,
if None, not save; 
if a string, savefits would be used to construct the downloaded file.</p>
</dd>
<dt><strong>wdir</strong><span class="classifier"><cite>string</cite></span></dt><dd><p>working directory for downloaded healpix file if savefits is not None.</p>
</dd>
<dt><strong>nside</strong><span class="classifier"><cite>int</cite></span></dt><dd><p>healpix nside parameter, must be a power of 2, less than 2**30</p>
</dd>
<dt><strong>coord</strong><span class="classifier">sequence of character, optional</span></dt><dd><p>Either one of ‘G’, ‘E’ or ‘C’ to describe the coordinate system of the map, 
or a sequence of 2 of these to rotate the map from the first to the 
second coordinate system.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pst.pipeline.PstParseTriggers</span> <span class="kn">import</span> <span class="n">PstParseTriggers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">PstParseTriggers</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">xml</span><span class="p">(</span><span class="s1">&#39;LVC#S190510g-2-Initial.xml&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">pstools</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">pstools tutorial</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pipeline.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pipeline</span></code> – tools dealing with trigger map, tilings and galaxies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../view.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">view</span></code> – tools for visulazation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../license.html">Licenses</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;CC/BY/4.0/International.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/generated/PstParseTriggers.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>